本章节主要介绍如何搭建 Kubernetes 的集群环境。

## 环境规划

<div style="border: 1px solid rgba(255, 165, 0,.1);
    padding: 10px;
    border-left: 5px solid rgba(255, 165, 0);
    background: rgba(255, 165, 0,.1);
    border-radius: 0 3px 3px 0;
    color: rgba(255, 165, 0);
    font-family: menlo;
    font-size: 14px;
    margin: 10px 0;
    display: flex;
    align-items: center;
    gap: 8px;">
    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" style="flex-shrink: 0;" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 8.00008V12.0001M12 16.0001H12.01M3 7.94153V16.0586C3 16.4013 3 16.5726 3.05048 16.7254C3.09515 16.8606 3.16816 16.9847 3.26463 17.0893C3.37369 17.2077 3.52345 17.2909 3.82297 17.4573L11.223 21.5684C11.5066 21.726 11.6484 21.8047 11.7985 21.8356C11.9315 21.863 12.0685 21.863 12.2015 21.8356C12.3516 21.8047 12.4934 21.726 12.777 21.5684L20.177 17.4573C20.4766 17.2909 20.6263 17.2077 20.7354 17.0893C20.8318 16.9847 20.9049 16.8606 20.9495 16.7254C21 16.5726 21 16.4013 21 16.0586V7.94153C21 7.59889 21 7.42756 20.9495 7.27477C20.9049 7.13959 20.8318 7.01551 20.7354 6.91082C20.6263 6.79248 20.4766 6.70928 20.177 6.54288L12.777 2.43177C12.4934 2.27421 12.3516 2.19543 12.2015 2.16454C12.0685 2.13721 11.9315 2.13721 11.7985 2.16454C11.6484 2.19543 11.5066 2.27421 11.223 2.43177L3.82297 6.54288C3.52345 6.70928 3.37369 6.79248 3.26463 6.91082C3.16816 7.01551 3.09515 7.13959 3.05048 7.27477C3 7.42756 3 7.59889 3 7.94153Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    </path>
</svg>
    <span style="line-height: 1.6;">说明：为了测试简单，本次搭建的是 <strong>一主两从</strong> 类型的集群。</span>
</div>

### 集群类型

Kubernetes 集群大体上分为两类：**一主多从**  和 **多主多从** 。

- **一主多从：** 一台 Master 节点和多台 Node 节点，搭建简单，但是有单机故障风险，适合用于测试环境。
- **多主多从：** 多台 Master 节点和多台 Node 节点，搭建麻烦，安全性高，适合用于生产环境。

<img src="assets/image-20251031102300099.png" alt="image-20251031102300099" style="zoom:77%;" />

### 安装方式

Kubernetes 有多种部署方式，目前主流的方式有 kubeadm、minikube、二进制包。

-   **minikube：** 一个用于快速搭建单节点 Kubernetes 的工具；

-   **kubeadm：** 一个用于快速搭建 Kubernetes 集群的工具；
-   **二进制包：** 从官网下载每个组件的二进制包，依次去安装，此方式对于理解 Kubernetes 组件更加有效；

### 主机规划

|  作用  |  IP  | 操作系统 |          配置          |
| :----: | :--: | :------: | :--------------------: |
| master |      |  CentOS  | 双核CPU 2G内存 40G硬盘 |
| node_1 |      |  CentOS  | 双核CPU 2G内存 40G硬盘 |
| node_2 |      |  CentOS  | 双核CPU 2G内存 40G硬盘 |

## 环境搭建

本次环境搭建需要安装三台 Centos 服务器（一主二从），然后在每台服务器中分别安装 docker（18.06.3）、kubeadm（1.17.4）、kubelet（1.17.4）、kubectl（1.17.4）程序。